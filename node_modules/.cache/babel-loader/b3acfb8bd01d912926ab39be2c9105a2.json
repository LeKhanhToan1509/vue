{"ast":null,"code":"import MainHeader from \"@/components/MainHeader.vue\";\nimport MainFooter from \"@/components/MainFooter.vue\";\nimport ButtonPreloader from \"@/components/preloaders/ButtonPreloader.vue\";\nimport SubHeader from \"@/components/SubHeader.vue\";\nimport ActionButton from \"@/components/ActionButton.vue\";\nimport SuccessModal from \"@/components/SuccessModal.vue\";\nimport { mapState, mapGetters } from \"vuex\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      noOrder: true,\n      userState: \"\",\n      userAddress: \"\",\n      referenceMessage: \"\",\n      price: \"\",\n      showModal: false,\n      email: \"\"\n    };\n  },\n\n  components: {\n    MainHeader,\n    MainFooter,\n    ButtonPreloader,\n    SubHeader,\n    ActionButton,\n    SuccessModal\n  },\n  computed: { ...mapState([\"user\", \"cart\"]),\n    ...mapGetters([\"subtotal\"])\n  },\n  methods: {\n    async placeOrder() {\n      this.noOrder = false;\n      await axios.post(\"https://gorana.onrender.com/orders/\", {\n        orders: this.cart.map(item => {\n          return {\n            product_id: item._id,\n            quantity: item.quantity,\n            size: item.size\n          };\n        }),\n        state: this.userState,\n        address: this.userAddress\n      }, {\n        headers: {\n          Authorization: `${this.user.token}`\n        }\n      }).then(response => {\n        this.referenceMessage = response.data.transaction_reference;\n        this.price = response.data.price;\n        this.noOrder = true;\n        this.showModal = true;\n      }).catch(error => {\n        this.noOrder = true;\n        console.log(error);\n      });\n    },\n\n    closeModal() {\n      this.showModal = false;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA0HA,OAAOA,UAAP,MAAuB,6BAAvB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,eAAP,MAA4B,6CAA5B;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,YAAP,MAAyB,+BAAzB;AACA,OAAOC,YAAP,MAAyB,+BAAzB;AAEA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,MAArC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACXC,MAAI,GAAG;AACH,WAAO;AACHC,aAAO,EAAE,IADN;AAEHC,eAAS,EAAE,EAFR;AAGHC,iBAAW,EAAE,EAHV;AAIHC,sBAAgB,EAAE,EAJf;AAKHC,WAAK,EAAE,EALJ;AAMHC,eAAS,EAAE,KANR;AAOHC,WAAK,EAAE;AAPJ,KAAP;AASH,GAXU;;AAYXC,YAAU,EAAE;AACRjB,cADQ;AAERC,cAFQ;AAGRC,mBAHQ;AAIRC,aAJQ;AAKRC,gBALQ;AAMRC;AANQ,GAZD;AAoBXa,UAAQ,EAAE,EACN,GAAGZ,QAAQ,CAAC,CAAC,MAAD,EAAS,MAAT,CAAD,CADL;AAEN,OAAGC,UAAU,CAAC,CAAC,UAAD,CAAD;AAFP,GApBC;AAwBXY,SAAO,EAAE;AACL,UAAMC,UAAN,GAAmB;AACf,WAAKV,OAAL,GAAe,KAAf;AACA,YAAMF,KAAI,CACLa,IADC,CAEE,qCAFF,EAGE;AACIC,cAAM,EAAE,KAAKC,IAAL,CAAUC,GAAV,CAAeC,IAAD,IAAU;AAC5B,iBAAO;AACHC,sBAAU,EAAED,IAAI,CAACE,GADd;AAEHC,oBAAQ,EAAEH,IAAI,CAACG,QAFZ;AAGHC,gBAAI,EAAEJ,IAAI,CAACI;AAHR,WAAP;AAKH,SANO,CADZ;AAQIC,aAAK,EAAE,KAAKnB,SARhB;AASIoB,eAAO,EAAE,KAAKnB;AATlB,OAHF,EAcE;AACIoB,eAAO,EAAE;AACLC,uBAAa,EAAG,GAAE,KAAKC,IAAL,CAAUC,KAAM;AAD7B;AADb,OAdF,EAoBDC,IApBC,CAoBKC,QAAD,IAAc;AAChB,aAAKxB,gBAAL,GAAwBwB,QAAQ,CAAC5B,IAAT,CAAc6B,qBAAtC;AACA,aAAKxB,KAAL,GAAauB,QAAQ,CAAC5B,IAAT,CAAcK,KAA3B;AACA,aAAKJ,OAAL,GAAe,IAAf;AACA,aAAKK,SAAL,GAAiB,IAAjB;AACH,OAzBC,EA0BDwB,KA1BC,CA0BMC,KAAD,IAAW;AACd,aAAK9B,OAAL,GAAe,IAAf;AACA+B,eAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,OA7BC,CAAN;AA8BH,KAjCI;;AAkCLG,cAAU,GAAG;AACT,WAAK5B,SAAL,GAAiB,KAAjB;AACH;;AApCI;AAxBE,CAAf","names":["MainHeader","MainFooter","ButtonPreloader","SubHeader","ActionButton","SuccessModal","mapState","mapGetters","axios","data","noOrder","userState","userAddress","referenceMessage","price","showModal","email","components","computed","methods","placeOrder","post","orders","cart","map","item","product_id","_id","quantity","size","state","address","headers","Authorization","user","token","then","response","transaction_reference","catch","error","console","log","closeModal"],"sourceRoot":"","sources":["D:\\empty\\BuyIt\\src\\views\\User\\CheckoutView.vue"],"sourcesContent":["<template>\n    <main-header />\n    <sub-header\n        heading=\"Checkout\"\n        subHeading=\"Complete your order by filling the form below\"\n    />\n    <section>\n        <div class=\"container\">\n            <div class=\"coupon\">\n                <input type=\"text\" placeholder=\"Enter your coupon code\" />\n                <action-button>Apply</action-button>\n            </div>\n            <form class=\"billing-info\" @submit.prevent=\"placeOrder\">\n                <div class=\"form\">\n                    <h4>Billing Address</h4>\n                    <div class=\"form-group\">\n                        <div class=\"form-control\">\n                            <label>First Name *</label>\n                            <input type=\"text\" required />\n                        </div>\n                        <div class=\"form-control\">\n                            <label>Last Name *</label>\n                            <input type=\"text\" required />\n                        </div>\n                    </div>\n                    <div class=\"form-control\">\n                        <label>Country *</label>\n                        <input type=\"text\" required />\n                    </div>\n                    <div class=\"form-control\">\n                        <label>Street Address*</label>\n                        <input\n                            type=\"text\"\n                            placeholder=\"House number and Street number\"\n                            required\n                            v-model=\"userAddress\"\n                        />\n                    </div>\n                    <div class=\"form-group\">\n                        <div class=\"form-control\">\n                            <label>Town / City *</label>\n                            <input type=\"text\" required />\n                        </div>\n                        <div class=\"form-control\">\n                            <label>State / County *</label>\n                            <input type=\"text\" required v-model=\"userState\" />\n                        </div>\n                    </div>\n                    <div class=\"form-control\">\n                        <label>Email Address *</label>\n                        <input type=\"email\" required />\n                    </div>\n                    <div class=\"form-control\">\n                        <label>Order notes (optional) </label>\n                        <textarea\n                            rows=\"10\"\n                            placeholder=\"Notes about your order, e.g. special notes for delivery\"\n                        ></textarea>\n                    </div>\n                </div>\n                <aside>\n                    <h4>Your Order</h4>\n                    <table class=\"table table-summary\">\n                        <thead>\n                            <tr>\n                                <th>Product</th>\n                                <th>Total (NGN)</th>\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            <tr v-for=\"(item, index) in cart\" :key=\"index\">\n                                <td>\n                                    <span>{{ item.name }}</span> <br />\n                                    Size: {{ item.size }} <br />\n                                    Qty: {{ item.quantity }}\n                                </td>\n                                <td>\n                                    {{ item.price.toFixed(2) }}\n                                </td>\n                            </tr>\n\n                            <tr class=\"summary-subtotal\">\n                                <td>Subtotal (NGN):</td>\n                                <td>{{ subtotal.toFixed(2) }}</td>\n                            </tr>\n                            <tr>\n                                <td>Shipping:</td>\n                                <td>Free shipping</td>\n                            </tr>\n                            <tr class=\"summary-total\">\n                                <td>Total (NGN):</td>\n                                <td>\n                                    {{ subtotal.toFixed(2) }}\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                    <button class=\"submit\" :class=\"{ payment: !noOrder }\">\n                        <template v-if=\"noOrder\">\n                            <span>Place Order</span>\n                            <div class=\"icon\">\n                                <i class=\"fa fa-credit-card\"></i>\n                            </div>\n                        </template>\n                        <button-preloader v-else />\n                    </button>\n                </aside>\n            </form>\n        </div>\n    </section>\n    <success-modal\n        @close-modal=\"closeModal\"\n        :price=\"price\"\n        :email=\"this.user.email\"\n        :reference=\"referenceMessage\"\n        v-if=\"showModal\"\n    />\n    <main-footer />\n</template>\n\n<script>\nimport MainHeader from \"@/components/MainHeader.vue\";\nimport MainFooter from \"@/components/MainFooter.vue\";\nimport ButtonPreloader from \"@/components/preloaders/ButtonPreloader.vue\";\nimport SubHeader from \"@/components/SubHeader.vue\";\nimport ActionButton from \"@/components/ActionButton.vue\";\nimport SuccessModal from \"@/components/SuccessModal.vue\";\n\nimport { mapState, mapGetters } from \"vuex\";\nimport axios from \"axios\";\n\nexport default {\n    data() {\n        return {\n            noOrder: true,\n            userState: \"\",\n            userAddress: \"\",\n            referenceMessage: \"\",\n            price: \"\",\n            showModal: false,\n            email: \"\",\n        };\n    },\n    components: {\n        MainHeader,\n        MainFooter,\n        ButtonPreloader,\n        SubHeader,\n        ActionButton,\n        SuccessModal,\n    },\n    computed: {\n        ...mapState([\"user\", \"cart\"]),\n        ...mapGetters([\"subtotal\"]),\n    },\n    methods: {\n        async placeOrder() {\n            this.noOrder = false;\n            await axios\n                .post(\n                    \"https://gorana.onrender.com/orders/\",\n                    {\n                        orders: this.cart.map((item) => {\n                            return {\n                                product_id: item._id,\n                                quantity: item.quantity,\n                                size: item.size,\n                            };\n                        }),\n                        state: this.userState,\n                        address: this.userAddress,\n                    },\n                    {\n                        headers: {\n                            Authorization: `${this.user.token}`,\n                        },\n                    }\n                )\n                .then((response) => {\n                    this.referenceMessage = response.data.transaction_reference;\n                    this.price = response.data.price;\n                    this.noOrder = true;\n                    this.showModal = true;\n                })\n                .catch((error) => {\n                    this.noOrder = true;\n                    console.log(error);\n                });\n        },\n        closeModal() {\n            this.showModal = false;\n        },\n    },\n};\n</script>\n\n<style scoped>\n.coupon {\n    display: flex;\n    gap: 15px;\n}\n\n.billing-info {\n    display: flex;\n    align-items: flex-start;\n    gap: 20px;\n    margin-top: 15px;\n}\n\n.billing-info h4 {\n    margin-bottom: 15px;\n}\n\n.form {\n    flex: 3;\n    display: flex;\n    flex-direction: column;\n    gap: 15px;\n}\n\nform input,\nform textarea {\n    border-radius: 0px;\n    padding: 0px;\n}\n\n.form-group {\n    display: flex;\n    justify-content: space-between;\n    gap: 20px;\n}\n.form-control {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    width: 100%;\n}\n\nlabel {\n    font-size: 1.5rem;\n}\n\n.form-control input,\n.form-control textarea {\n    padding: 10px 12px;\n    outline: none;\n    transition: 0.25s;\n    background-color: whitesmoke;\n    width: 100%;\n}\n\ntextarea {\n    resize: vertical;\n}\n\n.form-control input:focus,\n.form-control textarea:focus {\n    border: 1px solid var(--dim-blue);\n    background-color: white;\n}\n\naside {\n    flex: 1;\n    padding: 25px;\n    border: 1px dashed lightgray;\n    background-color: whitesmoke;\n    height: auto;\n}\n\naside h4 {\n    padding-bottom: 20px;\n    border-bottom: 1px solid black;\n}\n\ntable {\n    border-collapse: collapse;\n    width: 100%;\n}\n\n.table.table-summary thead th,\n.table.table-summary .summary-subtotal td {\n    color: var(--brown);\n    font-weight: 500;\n    font-size: 1.6rem;\n}\n\n.table.table-summary thead th:last-child,\n.table.table-summary tbody td:last-child {\n    text-align: right;\n    min-width: 90px;\n}\ntable thead tr th {\n    text-align: left;\n    font-size: 1.6rem;\n    font-weight: 400;\n}\n\ntable tbody tr td {\n    font-size: 1.6rem;\n    font-weight: 400;\n}\n\n.table.table-summary tbody td {\n    padding: 0;\n    height: 70px;\n    border-bottom: 0.1rem solid #ebebeb;\n}\n\n.table.table-summary .summary-total td {\n    font-weight: 400;\n    font-size: 1.6rem;\n    color: var(--dim-blue);\n    border-bottom: none;\n}\n\ntable tbody tr td span {\n    width: 150px;\n    white-space: nowrap;\n    display: block;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    padding-top: 10px;\n}\n\n.submit {\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 35px;\n    font-size: 1.6rem;\n    width: 100%;\n    color: var(--dim-blue);\n    background-color: transparent;\n    border-radius: 0px;\n    border: 1px solid var(--dim-blue);\n}\n\n.icon {\n    position: absolute;\n    right: 20px;\n}\n\n.submit:hover,\n.submit:focus,\n.submit:active,\n.payment {\n    background-color: var(--dim-blue);\n    color: white;\n}\n\n.submit:nth-child(2) {\n    display: none;\n}\n\n.submit:hover:nth-child(1),\n.submit:focus:nth-child(1) {\n    display: none;\n}\n\n@media (max-width: 790px) {\n    .billing-info,\n    .form-group {\n        flex-direction: column;\n        width: 100%;\n    }\n    aside,\n    .form {\n        width: 100%;\n    }\n    table tbody tr td span {\n        width: 100%;\n        white-space: break-spaces;\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}